<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BU Course Agent - AI Academic Advisor</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, #5e72e4 0%, #825ee4 100%);
        }
        
        #root {
            height: 100vh;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // API Configuration
        const API_BASE_URL = window.location.hostname === 'localhost' 
            ? 'http://localhost:8000' 
            : 'https://career-agent-9cif.onrender.com';

        // Token counting function
        const countTokens = (text) => {
            if (!text) return 0;
            const words = text.trim().split(/\s+/).length;
            const chars = text.length;
            const tokensByWords = Math.ceil(words * 1.3);
            const tokensByChars = Math.ceil(chars / 4);
            return Math.max(tokensByWords, tokensByChars);
        };

        // Format message text
        const formatMessageText = (text) => {
            if (!text || typeof text !== 'string') {
                return <div>No message content</div>;
            }

            // Try to parse as JSON
            try {
                const jsonData = JSON.parse(text);
                if (typeof jsonData === 'object') {
                    return (
                        <pre style={{
                            background: 'rgba(0,0,0,0.2)', 
                            padding: '12px', 
                            borderRadius: '6px', 
                            overflow: 'auto', 
                            color: 'white',
                            whiteSpace: 'pre-wrap'
                        }}>
                            <code>{JSON.stringify(jsonData, null, 2)}</code>
                        </pre>
                    );
                }
            } catch (e) {
                // Not JSON, continue
            }

            // Clean up the text and return
            const cleanText = text.replace(/\*\*/g, '');
            return (
                <div style={{color: 'white', whiteSpace: 'pre-wrap'}}>
                    {cleanText}
                </div>
            );
        };

        // Navigation Component
        const Navigation = ({ currentPage, setCurrentPage }) => {
            return (
                <div style={{
                    background: 'rgba(255, 255, 255, 0.95)',
                    padding: '16px 0',
                    height: '70px',
                    display: 'flex',
                    alignItems: 'center'
                }}>
                    <div style={{
                        maxWidth: '1200px', 
                        margin: '0 auto', 
                        padding: '0 20px', 
                        width: '100%',
                        display: 'flex', 
                        justifyContent: 'space-between', 
                        alignItems: 'center'
                    }}>
                        <div style={{display: 'flex', alignItems: 'center', gap: '15px'}}>
                            <div style={{
                                width: '48px',
                                height: '48px',
                                borderRadius: '50%',
                                background: 'linear-gradient(135deg, #667eea, #764ba2)',
                                display: 'flex',
                                alignItems: 'center',
                                justifyContent: 'center'
                            }}>
                                <i className="fas fa-graduation-cap" style={{color: 'white', fontSize: '20px'}}></i>
                            </div>
                            <span style={{
                                fontSize: '24px',
                                fontWeight: 'bold',
                                background: 'linear-gradient(90deg, #5e72e4, #825ee4)',
                                WebkitBackgroundClip: 'text',
                                WebkitTextFillColor: 'transparent'
                            }}>
                                BU Course Agent
                            </span>
                        </div>
                        <nav style={{display: 'flex', gap: '30px', alignItems: 'center'}}>
                            <button
                                onClick={() => setCurrentPage('home')}
                                style={{
                                    background: 'none',
                                    border: 'none',
                                    cursor: 'pointer',
                                    color: currentPage === 'home' ? '#5e72e4' : '#333',
                                    fontWeight: currentPage === 'home' ? 'bold' : 'normal',
                                    fontSize: '16px'
                                }}
                            >
                                Home
                            </button>
                            <button
                                onClick={() => setCurrentPage('about')}
                                style={{
                                    background: 'none',
                                    border: 'none',
                                    cursor: 'pointer',
                                    color: currentPage === 'about' ? '#5e72e4' : '#333',
                                    fontWeight: currentPage === 'about' ? 'bold' : 'normal',
                                    fontSize: '16px'
                                }}
                            >
                                About
                            </button>
                            <button
                                onClick={() => setCurrentPage('contact')}
                                style={{
                                    background: 'none',
                                    border: 'none',
                                    cursor: 'pointer',
                                    color: currentPage === 'contact' ? '#5e72e4' : '#333',
                                    fontWeight: currentPage === 'contact' ? 'bold' : 'normal',
                                    fontSize: '16px'
                                }}
                            >
                                Contact Us
                            </button>
                            <button
                                onClick={() => setCurrentPage('chat')}
                                style={{
                                    background: 'linear-gradient(135deg, #5e72e4, #825ee4)',
                                    color: 'white',
                                    padding: '10px 24px',
                                    borderRadius: '50px',
                                    border: 'none',
                                    fontWeight: 'bold',
                                    cursor: 'pointer',
                                    fontSize: '16px',
                                    boxShadow: '0 4px 15px rgba(94, 114, 228, 0.4)'
                                }}
                            >
                                Get Started
                            </button>
                        </nav>
                    </div>
                </div>
            );
        };

        // Footer Component
        const Footer = ({ setCurrentPage }) => {
            return (
                <div style={{
                    background: 'rgba(255, 255, 255, 0.95)',
                    padding: '20px 0',
                    height: '70px',
                    display: 'flex',
                    alignItems: 'center'
                }}>
                    <div style={{textAlign: 'center', width: '100%'}}>
                        <button 
                            onClick={() => setCurrentPage('terms')}
                            style={{background: 'none', border: 'none', cursor: 'pointer', color: '#5e72e4', marginRight: '20px'}}
                        >
                            Terms of Service
                        </button>
                        <span style={{color: '#999'}}>|</span>
                        <button 
                            onClick={() => setCurrentPage('privacy')}
                            style={{background: 'none', border: 'none', cursor: 'pointer', color: '#5e72e4', margin: '0 20px'}}
                        >
                            Privacy policy
                        </button>
                        <span style={{color: '#999'}}>|</span>
                        <button 
                            onClick={() => setCurrentPage('contact')}
                            style={{background: 'none', border: 'none', cursor: 'pointer', color: '#5e72e4', marginLeft: '20px'}}
                        >
                            Contact us
                        </button>
                    </div>
                </div>
            );
        };

        // Home Page
        const HomePage = ({ setCurrentPage }) => {
            return (
                <div style={{
                    height: 'calc(100vh - 140px)',
                    display: 'flex',
                    flexDirection: 'column',
                    justifyContent: 'center',
                    alignItems: 'center',
                    textAlign: 'center',
                    color: 'white'
                }}>
                    <i className="fas fa-robot" style={{fontSize: '96px', marginBottom: '30px', opacity: 0.9}}></i>
                    <h1 style={{fontSize: '48px', marginBottom: '20px', fontWeight: 'bold'}}>
                        BU Course Agent
                    </h1>
                    <p style={{fontSize: '20px', marginBottom: '30px', opacity: 0.9, maxWidth: '600px'}}>
                        Your AI-powered academic advisor for BU MET Computer Science programs
                    </p>
                    <button 
                        onClick={() => setCurrentPage('chat')}
                        style={{
                            background: 'white',
                            color: '#5e72e4',
                            fontSize: '18px',
                            padding: '15px 40px',
                            borderRadius: '50px',
                            border: 'none',
                            fontWeight: 'bold',
                            cursor: 'pointer',
                            boxShadow: '0 10px 30px rgba(0,0,0,0.2)'
                        }}
                    >
                        Get Started
                    </button>
                </div>
            );
        };

        // Upload Modal Component
        const UploadModal = ({ isOpen, onClose, onUpload }) => {
            const [selectedFile, setSelectedFile] = useState(null);
            const [documentType, setDocumentType] = useState('');
            const fileInputRef = useRef(null);

            const documentTypes = [
                { value: 'transcript', label: 'Academic Transcript', icon: 'fa-file-alt' },
                { value: 'resume', label: 'Resume/CV', icon: 'fa-id-card' },
                { value: 'job_description', label: 'Job Description', icon: 'fa-briefcase' },
                { value: 'course_list', label: 'Course List', icon: 'fa-list' },
            ];

            const handleFileSelect = (e) => {
                const file = e.target.files[0];
                if (file) {
                    setSelectedFile(file);
                }
            };

            const handleUpload = () => {
                if (selectedFile && documentType) {
                    onUpload(selectedFile, documentType);
                    setSelectedFile(null);
                    setDocumentType('');
                    onClose();
                }
            };

            if (!isOpen) return null;

            return (
                <div style={{
                    position: 'fixed',
                    top: 0,
                    left: 0,
                    right: 0,
                    bottom: 0,
                    background: 'rgba(0, 0, 0, 0.7)',
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'center',
                    zIndex: 1000
                }}>
                    <div style={{
                        background: 'linear-gradient(135deg, #5e72e4, #825ee4)',
                        borderRadius: '20px',
                        padding: '30px',
                        maxWidth: '500px',
                        width: '90%',
                        color: 'white'
                    }}>
                        <div style={{display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '20px'}}>
                            <h2 style={{fontSize: '24px', fontWeight: 'bold'}}>Upload Document</h2>
                            <button onClick={onClose} style={{background: 'none', border: 'none', cursor: 'pointer', fontSize: '28px', color: 'white'}}>
                                Ã—
                            </button>
                        </div>

                        <div style={{marginBottom: '20px'}}>
                            <label style={{display: 'block', marginBottom: '10px', fontWeight: '500'}}>
                                Select Document Type:
                            </label>
                            {documentTypes.map(type => (
                                <button
                                    key={type.value}
                                    onClick={() => setDocumentType(type.value)}
                                    style={{
                                        display: 'block',
                                        width: '100%',
                                        padding: '12px',
                                        marginBottom: '8px',
                                        borderRadius: '12px',
                                        border: documentType === type.value ? '2px solid white' : '1px solid rgba(255,255,255,0.3)',
                                        background: documentType === type.value ? 'rgba(255,255,255,0.2)' : 'rgba(255,255,255,0.1)',
                                        color: 'white',
                                        textAlign: 'left',
                                        cursor: 'pointer'
                                    }}
                                >
                                    <i className={`fas ${type.icon}`} style={{marginRight: '10px'}}></i>
                                    {type.label}
                                </button>
                            ))}
                        </div>

                        {documentType && (
                            <div style={{marginBottom: '20px'}}>
                                <input
                                    ref={fileInputRef}
                                    type="file"
                                    onChange={handleFileSelect}
                                    accept=".pdf,.doc,.docx,.txt"
                                    style={{display: 'none'}}
                                />
                                <button
                                    onClick={() => fileInputRef.current?.click()}
                                    style={{
                                        width: '100%',
                                        padding: '12px',
                                        borderRadius: '12px',
                                        border: '1px solid rgba(255,255,255,0.3)',
                                        background: 'rgba(255,255,255,0.1)',
                                        color: 'white',
                                        cursor: 'pointer'
                                    }}
                                >
                                    <i className="fas fa-cloud-upload-alt" style={{marginRight: '10px'}}></i>
                                    {selectedFile ? selectedFile.name : 'Choose File'}
                                </button>
                            </div>
                        )}

                        <div style={{display: 'flex', gap: '10px'}}>
                            <button
                                onClick={handleUpload}
                                disabled={!selectedFile || !documentType}
                                style={{
                                    flex: 1,
                                    padding: '12px',
                                    borderRadius: '12px',
                                    border: 'none',
                                    background: 'white',
                                    color: '#5e72e4',
                                    fontWeight: 'bold',
                                    opacity: (!selectedFile || !documentType) ? 0.5 : 1,
                                    cursor: (!selectedFile || !documentType) ? 'not-allowed' : 'pointer'
                                }}
                            >
                                Upload
                            </button>
                            <button
                                onClick={onClose}
                                style={{
                                    flex: 1,
                                    padding: '12px',
                                    borderRadius: '12px',
                                    border: '1px solid rgba(255,255,255,0.3)',
                                    background: 'rgba(255,255,255,0.1)',
                                    color: 'white',
                                    cursor: 'pointer'
                                }}
                            >
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        // Chat Page Component with all features
        const ChatPage = ({ messages, setMessages, inputValue, setInputValue, sessionId, setSessionId }) => {
            const [isTyping, setIsTyping] = useState(false);
            const [uploadModalOpen, setUploadModalOpen] = useState(false);
            const [tokenCount, setTokenCount] = useState(0);
            const messagesEndRef = useRef(null);

            useEffect(() => {
                if (messages.length === 0) {
                    setMessages([{
                        id: Date.now(),
                        text: "Hello! I'm your BU Course Assistant. How can I help you today?",
                        sender: 'agent',
                        timestamp: new Date()
                    }]);
                }
            }, []);

            useEffect(() => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            }, [messages]);

            useEffect(() => {
                setTokenCount(countTokens(inputValue));
            }, [inputValue]);

            const sendMessage = async (text = null) => {
                const messageText = text || inputValue.trim();
                if (!messageText) return;

                const tokens = countTokens(messageText);
                if (tokens > 100) {
                    alert(`Your message is too long (${tokens} tokens). Please limit to 100 tokens.`);
                    return;
                }

                const userMessage = {
                    id: Date.now(),
                    text: messageText,
                    sender: 'user',
                    timestamp: new Date()
                };
                setMessages(prev => [...prev, userMessage]);
                setInputValue('');
                setTokenCount(0);
                setIsTyping(true);

                try {
                    const response = await fetch(`${API_BASE_URL}/chat`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            message: messageText,
                            session_id: sessionId
                        })
                    });

                    const data = await response.json();
                    
                    if (!sessionId && data.session_id) {
                        setSessionId(data.session_id);
                    }

                    const agentMessage = {
                        id: Date.now() + 1,
                        text: data.response || "I'm here to help with your academic planning!",
                        sender: 'agent',
                        timestamp: new Date()
                    };
                    setMessages(prev => [...prev, agentMessage]);
                } catch (error) {
                    console.error('Error:', error);
                    setMessages(prev => [...prev, {
                        id: Date.now() + 1,
                        text: "I'm having trouble connecting. Please try again.",
                        sender: 'agent',
                        timestamp: new Date()
                    }]);
                } finally {
                    setIsTyping(false);
                }
            };

            const handleFileUpload = (file, documentType) => {
                const typeLabels = {
                    'transcript': 'transcript',
                    'resume': 'resume',
                    'job_description': 'job description',
                    'course_list': 'course list'
                };
                const message = `User uploads a ${typeLabels[documentType]}: ${file.name}`;
                sendMessage(message);
            };

            const newChat = () => {
                if (window.confirm('Start a new chat? Current conversation will be lost.')) {
                    setMessages([{
                        id: Date.now(),
                        text: "New chat started. How can I help?",
                        sender: 'agent',
                        timestamp: new Date()
                    }]);
                    setSessionId(null);
                }
            };

            const exportChat = () => {
                if (messages.length === 0) {
                    alert('No messages to export.');
                    return;
                }

                const chatContent = messages.map(msg => {
                    const sender = msg.sender === 'user' ? 'You' : 'BU Course Agent';
                    const time = new Date(msg.timestamp).toLocaleString();
                    return `[${time}] ${sender}: ${msg.text}`;
                }).join('\n\n');

                const blob = new Blob([chatContent], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `BU_Course_Agent_Chat_${new Date().toISOString().slice(0,10)}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            };

            const clearChat = () => {
                if (window.confirm('Clear all messages? This cannot be undone.')) {
                    setMessages([{
                        id: Date.now(),
                        text: "Chat cleared. How can I help you today?",
                        sender: 'agent',
                        timestamp: new Date()
                    }]);
                    setSessionId(null);
                }
            };

            const predefinedPrompts = [
                "What topics are covered in BU MET CS633?",
                "What courses are relevant to my career goals?",
                "Can you help me plan my class schedule?",
                "Which are the top trending skills in CS?"
            ];

            return (
                <div style={{
                    height: 'calc(100vh - 140px)',
                    display: 'flex',
                    overflow: 'hidden'
                }}>
                    {/* Upload Modal */}
                    <UploadModal
                        isOpen={uploadModalOpen}
                        onClose={() => setUploadModalOpen(false)}
                        onUpload={handleFileUpload}
                    />

                    {/* Sidebar */}
                    <div style={{
                        width: '250px',
                        background: 'rgba(255, 255, 255, 0.1)',
                        padding: '20px',
                        display: 'flex',
                        flexDirection: 'column',
                        gap: '10px'
                    }}>
                        <button 
                            onClick={newChat}
                            style={{
                                background: 'white',
                                color: '#5e72e4',
                                padding: '10px',
                                borderRadius: '25px',
                                border: 'none',
                                cursor: 'pointer',
                                fontWeight: 'bold',
                                marginBottom: '10px'
                            }}
                        >
                            <i className="fas fa-plus" style={{marginRight: '8px'}}></i>
                            New Chat
                        </button>

                        <h3 style={{color: 'white', fontSize: '14px', marginBottom: '10px'}}>
                            Predefined Prompts
                        </h3>
                        
                        {predefinedPrompts.map((prompt, index) => (
                            <button
                                key={index}
                                onClick={() => sendMessage(prompt)}
                                style={{
                                    background: 'rgba(255, 255, 255, 0.1)',
                                    color: 'white',
                                    padding: '10px',
                                    borderRadius: '10px',
                                    border: '1px solid rgba(255, 255, 255, 0.2)',
                                    cursor: 'pointer',
                                    textAlign: 'left',
                                    fontSize: '12px',
                                    transition: 'all 0.3s'
                                }}
                                onMouseEnter={(e) => {
                                    e.target.style.background = 'rgba(255, 255, 255, 0.2)';
                                    e.target.style.transform = 'translateX(5px)';
                                }}
                                onMouseLeave={(e) => {
                                    e.target.style.background = 'rgba(255, 255, 255, 0.1)';
                                    e.target.style.transform = 'translateX(0)';
                                }}
                            >
                                {prompt}
                            </button>
                        ))}

                        <div style={{marginTop: '20px'}}>
                            <button 
                                onClick={() => setUploadModalOpen(true)}
                                style={{
                                    width: '100%',
                                    background: 'rgba(255, 255, 255, 0.1)',
                                    color: 'white',
                                    padding: '10px',
                                    borderRadius: '10px',
                                    border: '1px solid rgba(255, 255, 255, 0.2)',
                                    cursor: 'pointer',
                                    fontSize: '12px',
                                    marginBottom: '10px'
                                }}
                            >
                                <i className="fas fa-upload" style={{marginRight: '8px'}}></i>
                                Upload Document
                            </button>

                            <button 
                                onClick={exportChat}
                                style={{
                                    width: '100%',
                                    background: 'rgba(255, 255, 255, 0.1)',
                                    color: 'white',
                                    padding: '10px',
                                    borderRadius: '10px',
                                    border: '1px solid rgba(255, 255, 255, 0.2)',
                                    cursor: 'pointer',
                                    fontSize: '12px',
                                    marginBottom: '10px'
                                }}
                            >
                                <i className="fas fa-download" style={{marginRight: '8px'}}></i>
                                Export Chat
                            </button>

                            <button 
                                onClick={clearChat}
                                style={{
                                    width: '100%',
                                    background: 'rgba(255, 255, 255, 0.1)',
                                    color: 'white',
                                    padding: '10px',
                                    borderRadius: '10px',
                                    border: '1px solid rgba(255, 255, 255, 0.2)',
                                    cursor: 'pointer',
                                    fontSize: '12px'
                                }}
                            >
                                <i className="fas fa-trash" style={{marginRight: '8px'}}></i>
                                Clear Chat
                            </button>
                        </div>
                    </div>

                    {/* Chat Area */}
                    <div style={{
                        flex: 1,
                        display: 'flex',
                        flexDirection: 'column',
                        background: 'rgba(255, 255, 255, 0.05)',
                        margin: '20px',
                        borderRadius: '20px'
                    }}>
                        {/* Header */}
                        <div style={{
                            padding: '20px',
                            background: 'rgba(255, 255, 255, 0.1)',
                            borderRadius: '20px 20px 0 0',
                            textAlign: 'center'
                        }}>
                            <h2 style={{color: 'white', margin: 0}}>BU Course Agent</h2>
                        </div>

                        {/* Messages */}
                        <div style={{
                            flex: 1,
                            padding: '20px',
                            overflowY: 'auto',
                            display: 'flex',
                            flexDirection: 'column',
                            gap: '15px'
                        }}>
                            {messages.map(message => (
                                <div key={message.id} style={{
                                    display: 'flex',
                                    alignItems: 'flex-start',
                                    justifyContent: message.sender === 'user' ? 'flex-end' : 'flex-start'
                                }}>
                                    {message.sender === 'agent' && (
                                        <span style={{fontSize: '24px', marginRight: '10px'}}>ðŸ¤–</span>
                                    )}
                                    <div style={{
                                        maxWidth: '70%',
                                        padding: '12px 16px',
                                        borderRadius: '12px',
                                        background: message.sender === 'user' 
                                            ? 'linear-gradient(135deg, #667eea, #764ba2)' 
                                            : 'rgba(255, 255, 255, 0.1)',
                                        color: 'white'
                                    }}>
                                        {message.sender === 'agent' ? formatMessageText(message.text) : message.text}
                                    </div>
                                    {message.sender === 'user' && (
                                        <span style={{fontSize: '24px', marginLeft: '10px'}}>ðŸ‘¤</span>
                                    )}
                                </div>
                            ))}
                            
                            {isTyping && (
                                <div style={{display: 'flex', alignItems: 'center'}}>
                                    <span style={{fontSize: '24px', marginRight: '10px'}}>ðŸ¤–</span>
                                    <div style={{
                                        padding: '12px 16px',
                                        borderRadius: '12px',
                                        background: 'rgba(255, 255, 255, 0.1)',
                                        color: 'white'
                                    }}>
                                        <span>â€¢</span><span style={{margin: '0 3px'}}>â€¢</span><span>â€¢</span>
                                    </div>
                                </div>
                            )}
                            <div ref={messagesEndRef} />
                        </div>

                        {/* Input */}
                        <div style={{
                            padding: '20px',
                            background: 'rgba(255, 255, 255, 0.1)',
                            borderRadius: '0 0 20px 20px'
                        }}>
                            <div style={{display: 'flex', gap: '10px', alignItems: 'center'}}>
                                <button
                                    onClick={() => setUploadModalOpen(true)}
                                    style={{
                                        padding: '12px',
                                        borderRadius: '50%',
                                        border: 'none',
                                        background: 'rgba(255, 255, 255, 0.1)',
                                        color: 'white',
                                        cursor: 'pointer'
                                    }}
                                    title="Upload Document"
                                >
                                    <i className="fas fa-paperclip"></i>
                                </button>
                                <div style={{flex: 1, position: 'relative'}}>
                                    <input
                                        type="text"
                                        value={inputValue}
                                        onChange={(e) => setInputValue(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && sendMessage()}
                                        placeholder="Type a message..."
                                        style={{
                                            width: '100%',
                                            padding: '12px 80px 12px 15px',
                                            borderRadius: '25px',
                                            border: 'none',
                                            background: 'rgba(255, 255, 255, 0.1)',
                                            color: 'white',
                                            fontSize: '14px',
                                            outline: 'none'
                                        }}
                                    />
                                    <span style={{
                                        position: 'absolute',
                                        right: '10px',
                                        top: '50%',
                                        transform: 'translateY(-50%)',
                                        fontSize: '12px',
                                        padding: '4px 8px',
                                        borderRadius: '12px',
                                        background: tokenCount > 100 ? 'rgba(248, 113, 113, 0.2)' : 
                                                   tokenCount > 80 ? 'rgba(251, 191, 36, 0.2)' : 
                                                   'rgba(134, 239, 172, 0.2)',
                                        color: tokenCount > 100 ? '#f87171' : 
                                               tokenCount > 80 ? '#fbbf24' : 
                                               '#86efac'
                                    }}>
                                        {tokenCount}/100
                                    </span>
                                </div>
                                <button 
                                    onClick={() => sendMessage()}
                                    disabled={tokenCount > 100}
                                    style={{
                                        padding: '12px 20px',
                                        borderRadius: '25px',
                                        border: 'none',
                                        background: tokenCount > 100 ? '#999' : 'white',
                                        color: tokenCount > 100 ? '#666' : '#5e72e4',
                                        cursor: tokenCount > 100 ? 'not-allowed' : 'pointer'
                                    }}
                                >
                                    <i className="fas fa-paper-plane"></i>
                                </button>
                            </div>
                            {tokenCount > 100 && (
                                <p style={{color: '#f87171', fontSize: '12px', marginTop: '8px', textAlign: 'center'}}>
                                    Message exceeds 100 token limit
                                </p>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        // Simple About Page
        const AboutPage = () => (
            <div style={{
                height: 'calc(100vh - 140px)',
                padding: '40px',
                color: 'white',
                overflow: 'auto'
            }}>
                <h1 style={{textAlign: 'center', marginBottom: '30px'}}>About Us</h1>
                <div style={{
                    maxWidth: '800px',
                    margin: '0 auto',
                    background: 'rgba(255, 255, 255, 0.1)',
                    padding: '30px',
                    borderRadius: '20px'
                }}>
                    <p>We are graduate students at Boston University's Metropolitan College.</p>
                    <br/>
                    <h3>Our Team:</h3>
                    <ul style={{listStyle: 'none', padding: '20px 0'}}>
                        <li>Sean Silver - Team Lead</li>
                        <li>Gagan Veginati - Frontend Developer</li>
                        <li>Brendan Collins - Scrum Master</li>
                        <li>Zharas Omirzak - UI Designer</li>
                        <li>Jonathan Rothendler - Database Administrator</li>
                    </ul>
                </div>
            </div>
        );

        // Simple Contact Page
        const ContactPage = () => (
            <div style={{
                height: 'calc(100vh - 140px)',
                padding: '40px',
                color: 'white',
                overflow: 'auto'
            }}>
                <h1 style={{textAlign: 'center', marginBottom: '30px'}}>Contact Us</h1>
                <div style={{
                    maxWidth: '600px',
                    margin: '0 auto',
                    background: 'rgba(255, 255, 255, 0.1)',
                    padding: '30px',
                    borderRadius: '20px',
                    textAlign: 'center'
                }}>
                    <p>For questions about this project:</p>
                    <br/>
                    <a href="https://www.bu.edu/met/" style={{color: 'white'}}>
                        BU MET Website
                    </a>
                </div>
            </div>
        );

        // Simple Terms Page
        const TermsPage = () => (
            <div style={{
                height: 'calc(100vh - 140px)',
                padding: '40px',
                color: 'white',
                overflow: 'auto'
            }}>
                <h1 style={{textAlign: 'center'}}>Terms of Service</h1>
                <div style={{
                    maxWidth: '800px',
                    margin: '30px auto',
                    background: 'rgba(255, 255, 255, 0.1)',
                    padding: '30px',
                    borderRadius: '20px'
                }}>
                    <p>This is a student project for educational purposes.</p>
                </div>
            </div>
        );

        // Simple Privacy Page
        const PrivacyPage = () => (
            <div style={{
                height: 'calc(100vh - 140px)',
                padding: '40px',
                color: 'white',
                overflow: 'auto'
            }}>
                <h1 style={{textAlign: 'center'}}>Privacy Policy</h1>
                <div style={{
                    maxWidth: '800px',
                    margin: '30px auto',
                    background: 'rgba(255, 255, 255, 0.1)',
                    padding: '30px',
                    borderRadius: '20px'
                }}>
                    <p>We do not store personal data permanently.</p>
                </div>
            </div>
        );

        // Main App Component
        const App = () => {
            const [currentPage, setCurrentPage] = useState('home');
            const [messages, setMessages] = useState([]);
            const [inputValue, setInputValue] = useState('');
            const [sessionId, setSessionId] = useState(null);

            const renderPage = () => {
                switch(currentPage) {
                    case 'home':
                        return <HomePage setCurrentPage={setCurrentPage} />;
                    case 'chat':
                        return (
                            <ChatPage 
                                messages={messages}
                                setMessages={setMessages}
                                inputValue={inputValue}
                                setInputValue={setInputValue}
                                sessionId={sessionId}
                                setSessionId={setSessionId}
                            />
                        );
                    case 'about':
                        return <AboutPage />;
                    case 'contact':
                        return <ContactPage />;
                    case 'terms':
                        return <TermsPage />;
                    case 'privacy':
                        return <PrivacyPage />;
                    default:
                        return <HomePage setCurrentPage={setCurrentPage} />;
                }
            };

            return (
                <div style={{height: '100vh', display: 'flex', flexDirection: 'column'}}>
                    <Navigation currentPage={currentPage} setCurrentPage={setCurrentPage} />
                    {renderPage()}
                    <Footer setCurrentPage={setCurrentPage} />
                </div>
            );
        };

        // Render App
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>